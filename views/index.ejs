<div class="container">
    <% if (playlist.length > 0) {   
        let index = 0 
    %>
    <% for (let list of playlist) {

            let musicIndex = 0
        %>
    <div class="row cant d-flex justify-content-center align-items-center playlist">
        <div class="col-sm-8">
            <div class="p-5 card border-0">
                <a class="link-primary text-decoration-none" href="/playlist/<%-list.id%>">
                    <div class="d-flex justify-content-between mb-4">
                        <span class="h4">
                            <%=list.title%>
                        </span>
                </a>
                <div class="wrap">
                    <button type="button" class="btn <%=(list.likeYn === true) ? 'btn-primary' : 'btn-light' %> align-self-end like" data-like="<%-list.like%>" data-playlist-index="<%-list.id%>" <%=(user_session.is_login !== true) ? 'disabled' : ''%>>
                        <i class="fa-solid fa-thumbs-up"></i>
                        <span class="likeCount"><%=list.like%></span>
                    </button>
                    <a href="/playlist/<%-list.id%>">
                        <button class="btn btn-light align-self-end">
                            <i class="fa-solid fa-comment"></i>
                            <span class="commentCount"><%=list.commentCount%></span>    
                        </button>
                    </a>
                </div>
            </div>
            <img src="<%-list.firstThumbnail%>" class="thumbnail" id="thumbnail<%-list.id%>">

            <% if (list.musicList) { %>
            <iframe class="play_frame play_frame<%-list.id%> d-none" id="test"
                src="https://www.youtube.com/embed/<%-list.first_music%>?start=1&enablejsapi=1&version=3&playerapiid=ytplayer&modestbranding=1&controls=0&showinfo=0"
                title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; 
                        clipboard-write; encrypted-media;
                        gyroscope; picture-in-picture" allowfullscreen></iframe>
            <input type="range" class="form-range volume" value="100" data-playlistId="<%-list.id%>" min="0" max="100" step="1" id="customRange1" disabled>
            <input type="hidden" class="nowPlaying" id="nowPlaying<%-list.id%>"value="">
            <% } else {%>
                음악을 등록해주세요.
            <% } %>
        </div>

    </div>
    <div class="col-sm-4 border-0">
        <div class="p-5 card border-0" style="padding:0.1rem !important;">
            <div class="d-flex justify-content-center p-3 music">
                <div class="d-flex flex-column">
                    <% if (list.musicList) { %>
                    <ul class="list-group">
                        <% for (let music of list.musicList) { %>
                        <%
                                    let hour = Math.floor(music.length/3600)
                                    let min = Math.floor((music.length - hour * 3600)/60)
                                    let sec = Math.floor((music.length - ((hour * 3600) + (min * 60)))) -1
                                %>
                        <li class="list-group-item play <%=(musicIndex > 4) ? "hide d-none" : ""%>"
                            data-youtube="<%=music.youtube_link%>" data-music-index="<%=musicIndex%>"
                            data-playlist-index="<%=list.id%>" data-sec="<%=music.length%>"
                            data-thumbnail="<%=music.thumbnail%>" style="cursor:pointer;" aria-current="true">
                            <div class="tmp">
                                <img src="<%-music.thumbnail%>" style="width:10%;margin-right: 1rem;">
                                <div>
                                    <span class="music_title mb-1"><%=music.title%></span>
                                    <small class="text-muted">
                                        <%=(hour < 10) ? "0"+hour : hour%>:<%=(min < 10 ) ? "0"+min : min%>:<%=(sec < 10 ) ? "0"+sec : sec%>
                                    </small>
                                </div>
                            </div>
                        </li>
                        <% 
                                    musicIndex++
                                    } 
                                %>

                        <% if (list.musicList.length > 5) { %>
                        <button class="mt-4 btn btn-primary btn-lg btn-block more">SHOW MORE</button>
                        <% } %>
                    </ul>
                    <% } else { %>
                    <ul class="list-group">
                        등록된 음악이 없습니다.
                    </ul>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</div>
<%  index++
        } %>
<% } else { %>
플레이리스트가 없습니다.
<% } %>
<input type="hidden" name="_csrf" value="<%-csrfToken%>">
</div>
<script src="/javascripts/index.js"></script>
